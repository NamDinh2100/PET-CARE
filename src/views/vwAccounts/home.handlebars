{{#section 'css'}}
<style>
    /* --- 1. CSS CHO NAVBAR & SCROLL --- */
    html {
        scroll-behavior: smooth;
        scroll-padding-top: 85px;
    }

    /* --- 2. HERO SECTION --- */
    .hero-section {
        background-color: #eef7f9;
        padding: 80px 0;
        border-bottom-right-radius: 100px;
    }

    .hero-title {
        font-family: 'Abhaya Libre', serif;
        font-size: 3.5rem;
        font-weight: 800;
        color: #222;
    }

    .hero-img {
        max-width: 100%;
        border-radius: 20px;
        box-shadow: 20px 20px 0px rgba(45, 91, 255, 0.1);
    }

    /* --- 3. ABOUT US SECTION --- */
    .about-section {
        background: white;
        padding: 80px 0;
    }

    .about-container {
        max-width: 900px;
        margin: 0 auto;
        text-align: center;
    }

    .about-title {
        font-family: 'Abhaya Libre', serif;
        font-weight: 800;
        font-size: 2.5rem;
        color: #212529;
        margin-bottom: 30px;
        position: relative;
        display: inline-block;
    }

    .about-title::after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 4px;
        background: #2d5bff;
        border-radius: 2px;
    }

    .about-text {
        color: #6c757d;
        font-size: 1.1rem;
        line-height: 1.8;
        margin-bottom: 30px;
    }

    .about-features {
        display: flex;
        justify-content: center;
        gap: 40px;
        flex-wrap: wrap;
        margin-top: 40px;
    }

    .about-feature {
        text-align: center;
    }

    .about-feature-icon {
        width: 70px;
        height: 70px;
        background: #2d5bff;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 15px;
        color: white;
        font-size: 1.8rem;
    }

    .about-feature-title {
        font-weight: 700;
        color: #212529;
        font-size: 1.1rem;
    }

    .about-feature-text {
        color: #6c757d;
        font-size: 0.9rem;
    }

    /* --- 4. CAROUSEL SECTIONS --- */
    .carousel-section {
        padding: 60px 0;
        overflow: hidden;
    }

    .carousel-section.services-bg {
        background: #f8f9fa;
    }

    .carousel-section.team-bg {
        background: #f8f9fa;
    }

    .section-header {
        text-align: center;
        margin-bottom: 40px;
    }

    .section-title {
        font-family: 'Abhaya Libre', serif;
        font-weight: 800;
        font-size: 2.2rem;
        color: #212529;
        margin-bottom: 10px;
    }

    .section-title.text-white {
        color: white;
    }

    .section-subtitle {
        color: #6c757d;
        font-size: 1rem;
    }

    .section-subtitle.text-light {
        color: #adb5bd;
    }

    /* Carousel Wrapper */
    .carousel-wrapper {
        overflow: hidden;
        position: relative;
        padding: 10px 0;
    }

    .carousel-track {
        display: flex;
        gap: 25px;
        animation: scrollCarousel 25s linear infinite;
        width: max-content;
    }

    .carousel-track:hover {
        animation-play-state: paused;
    }

    @keyframes scrollCarousel {
        0% {
            transform: translateX(0);
        }
        100% {
            transform: translateX(-50%);
        }
    }

    /* Service Card */
    .service-card {
        flex: 0 0 300px;
        background: white;
        border-radius: 16px;
        padding: 25px;
        border: 2px solid #e9ecef;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    }

    .service-card:hover {
        transform: translateY(-8px);
        border-color: #2d5bff;
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
    }

    .service-icon {
        width: 60px;
        height: 60px;
        background: #2d5bff;
        border-radius: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 18px;
        color: white;
        font-size: 1.6rem;
    }

    .service-name {
        font-family: 'Abhaya Libre', serif;
        font-weight: 700;
        font-size: 1.2rem;
        color: #212529;
        margin-bottom: 10px;
    }

    .service-description {
        color: #6c757d;
        font-size: 0.85rem;
        line-height: 1.5;
        margin-bottom: 15px;
    }

    .service-price {
        display: inline-block;
        background: #e8f4fd;
        color: #2d5bff;
        font-weight: 700;
        font-size: 1rem;
        padding: 6px 16px;
        border-radius: 20px;
    }

    /* Employee Card */
    .employee-card {
        flex: 0 0 280px;
        background: white;
        border-radius: 16px;
        overflow: hidden;
        border: 2px solid #e9ecef;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    }

    .employee-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
    }

    .employee-header {
        background: #2d5bff;
        padding: 25px;
        text-align: center;
    }

    .employee-avatar {
        width: 80px;
        height: 80px;
        background: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto;
        font-size: 2rem;
        font-weight: 800;
        color: #2d5bff;
        border: 3px solid rgba(255, 255, 255, 0.3);
    }

    .employee-body {
        padding: 20px;
        text-align: center;
    }

    .employee-name {
        font-family: 'Abhaya Libre', serif;
        font-weight: 700;
        font-size: 1.2rem;
        color: #212529;
        margin-bottom: 8px;
    }

    .employee-role {
        display: inline-block;
        background: #2d5bff;
        color: white;
        font-size: 0.7rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
        padding: 5px 14px;
        border-radius: 15px;
        margin-bottom: 12px;
    }

    .employee-email {
        color: #6c757d;
        font-size: 0.85rem;
    }

    .employee-email i {
        color: #2d5bff;
        margin-right: 6px;
    }

    /* Employee Grid Layout */
    .employee-grid {
        display: flex;
        justify-content: center;
        gap: 25px;
        flex-wrap: wrap;
        padding: 10px 20px;
    }

    .employee-grid .employee-card {
        flex: 0 0 280px;
        max-width: 280px;
    }

    /* --- 5. MODAL STYLES --- */
    .modal-content-custom {
        border-radius: 20px;
        border: 3px solid #2d5bff;
        overflow: hidden;
    }

    .modal-header-custom-list {
        background: #2d5bff;
        color: white;
        border-bottom: none;
        text-align: center;
        padding: 20px 30px;
    }

    .modal-header-custom-list .modal-title {
        width: 100%;
        text-align: center;
    }

    .modal-header-custom {
        background: #2d5bff;
        border-bottom: 3px solid #2d5bff;
        padding: 20px 30px;
        border-radius: 0px 0px 0 0;
        text-align: center;
    }

    .modal-header-custom .modal-title-custom {
        width: 100%;
        text-align: center;
    }

    .modal-title-custom {
        font-family: 'Abhaya Libre', serif;
        font-weight: 800;
        text-transform: uppercase;
        color: white;
    }

    .btn-close-custom {
        background: #dc3545;
        border: none;
        border-radius: 50%;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        transition: none;
    }

    .btn-close-custom:hover,
    .btn-close-custom:focus {
        background: #dc3545;
        box-shadow: none;
        color: white;
    }

    /* Responsive */
    @media (max-width: 768px) {
        .hero-title {
            font-size: 2.5rem;
        }
        
        .about-features {
            gap: 20px;
        }
        
        .about-title,
        .section-title {
            font-size: 1.8rem;
        }
    }
</style>
{{/section}}

<section id="home" class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1 class="hero-title mb-4">Professional Pet Care <br>You Can Trust</h1>
                <p class="lead text-secondary mb-4">
                    Expert veterinary services, professional grooming, and comprehensive health care for your beloved
                    pets.
                </p>
                <button class="btn btn-primary btn-lg rounded-pill px-5 fw-bold" style="background: #2d5bff;"
                    data-bs-toggle="modal" data-bs-target="#bookingModal">
                    <i class="bi bi-calendar-heart me-2"></i>Book Appointment
                </button>
            </div>
            <div class="col-lg-6 mt-5 mt-lg-0">
                <img src="https://img.freepik.com/free-photo/group-portrait-adorable-puppies_53876-64778.jpg"
                    alt="Pet Care" class="hero-img">
            </div>
        </div>
    </div>
</section>

<!-- About Us Section -->
<section id="about" class="about-section">
    <div class="container">
        <div class="about-container">
            <h2 class="about-title">About Us</h2>
            <p class="about-text">
                Welcome to <strong>PetCareUS</strong> – your trusted partner in providing exceptional care for your beloved pets. 
                Founded with a passion for animals and a commitment to excellence, we offer comprehensive veterinary services, 
                professional grooming, and personalized health care solutions. Our team of experienced veterinarians and pet care 
                specialists work tirelessly to ensure your furry friends receive the love and attention they deserve.
            </p>
            <p class="about-text">
                At PetCareUS, we believe every pet is family. That's why we've created a warm, welcoming environment where 
                both pets and their owners feel comfortable. From routine check-ups to emergency care, we're here for you 24/7.
            </p>
            <div class="about-features">
                <div class="about-feature">
                    <div class="about-feature-icon">
                        <i class="bi bi-award"></i>
                    </div>
                    <div class="about-feature-title">10+ Years Experience</div>
                    <div class="about-feature-text">Trusted by thousands</div>
                </div>
                <div class="about-feature">
                    <div class="about-feature-icon">
                        <i class="bi bi-people"></i>
                    </div>
                    <div class="about-feature-title">Expert Team</div>
                    <div class="about-feature-text">Certified professionals</div>
                </div>
                <div class="about-feature">
                    <div class="about-feature-icon">
                        <i class="bi bi-clock"></i>
                    </div>
                    <div class="about-feature-title">24/7 Support</div>
                    <div class="about-feature-text">Always available</div>
                </div>
                <div class="about-feature">
                    <div class="about-feature-icon">
                        <i class="bi bi-heart"></i>
                    </div>
                    <div class="about-feature-title">5000+ Happy Pets</div>
                    <div class="about-feature-text">And counting</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Services Carousel Section -->
<section id="services" class="carousel-section services-bg">
    <div class="container-fluid px-0">
        <div class="section-header">
            <h2 class="section-title">Our Services</h2>
            <p class="section-subtitle">Comprehensive care solutions for your beloved pets</p>
        </div>

        {{#if services}}
        <div class="carousel-wrapper">
            <div class="carousel-track" id="servicesCarousel">
                {{#each services}}
                <div class="service-card">
                    <div class="service-icon">
                        <i class="bi bi-heart-pulse-fill"></i>
                    </div>
                    <h4 class="service-name">{{this.service_name}}</h4>
                    <p class="service-description">
                        {{#if this.description}}{{this.description}}{{else}}Professional pet care service with expert attention.{{/if}}
                    </p>
                    <span class="service-price">${{this.base_price}}</span>
                </div>
                {{/each}}
            </div>
        </div>
        {{else}}
        <div class="container">
            <div class="empty-state">
                <i class="bi bi-emoji-frown"></i>
                <p>No services available at the moment.</p>
            </div>
        </div>
        {{/if}}
    </div>
</section>

<!-- Team Section -->
<section class="carousel-section team-bg">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Our outstanding veterinarian</h2>
            <p class="section-subtitle">Dedicated professionals who love what they do</p>
        </div>

        {{#if employees}}
        <div class="employee-grid">
            {{#each (limit employees 4)}}
            <div class="employee-card">
                <div class="employee-header">
                    <div class="employee-avatar">{{substring this.full_name 0 1}}</div>
                </div>
                <div class="employee-body">
                    <h4 class="employee-name">{{this.full_name}}</h4>
                    <span class="employee-role">{{this.role}}</span>
                    <div class="employee-email">
                        <i class="bi bi-envelope-fill"></i>{{this.email}}
                    </div>
                </div>
            </div>
            {{/each}}
        </div>
        
        {{else}}
        <div class="container">
            <div class="empty-state" style="background: #343a40;">
                <i class="bi bi-people" style="color: #6c757d;"></i>
                <p style="color: #adb5bd;">Our team information is being updated.</p>
            </div>
        </div>
        {{/if}}
    </div>
</section>

<!-- All Employees Modal -->
<div class="modal fade" id="allEmployeesModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content modal-content-custom">
            <div class="modal-header modal-header-custom-list">
                <h5 class="modal-title fw-bold"><i class="bi bi-people-fill me-2"></i>Our Team Members</h5>
                <button type="button" class="btn-close-custom" data-bs-dismiss="modal">✕</button>
            </div>
            <div class="modal-body p-4">
                {{#if employees}}
                <div class="employee-modal-grid">
                    {{#each employees}}
                    <div class="employee-card">
                        <div class="employee-header">
                            <div class="employee-avatar">{{substring this.full_name 0 1}}</div>
                        </div>
                        <div class="employee-body">
                            <h4 class="employee-name">{{this.full_name}}</h4>
                            <span class="employee-role">{{this.role}}</span>
                            <div class="employee-email">
                                <i class="bi bi-envelope-fill"></i>{{this.email}}
                            </div>
                        </div>
                    </div>
                    {{/each}}
                </div>
                {{else}}
                <div class="text-center py-4">
                    <p class="text-muted">No team members available.</p>
                </div>
                {{/if}}
            </div>
        </div>
    </div>
</div>

<!-- Booking Modal -->
<div class="modal fade" id="bookingModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content modal-content-custom" style="max-width: 500px; margin: auto;">
            <div class="modal-header modal-header-custom">
                <h5 class="modal-title-custom m-0">BOOKING FORM</h5>
                <button type="button" class="btn-close-custom" data-bs-dismiss="modal">✕</button>
            </div>
            <div class="modal-body p-4">
                {{#if isAuth}}
                <form id="bookingForm" method="POST" action="/appointments/book">
                    <div class="mb-3">
                        <select class="form-select rounded-pill px-3" name="pet_id" required>
                            <option selected disabled>SELECT YOUR PET</option>
                            {{#each pets}}
                            <option value="{{this.pet_id}}">{{this.name}}</option>
                            {{/each}}
                        </select>
                    </div>
                    <div class="row mb-3">
                        <div class="col-6"><input type="date" class="form-control rounded-pill" name="date_start" required></div>
                        <div class="col-6"><input type="time" class="form-control rounded-pill" name="time" required></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-bold text-uppercase text-muted" style="font-size: 0.9rem;">Select Services:</label>
                        {{#if serviceList}}
                        <div style="border: 2px solid #000; border-radius: 20px; padding: 20px 40px; background-color: #fff; max-height: 150px; overflow-y: auto;">
                            {{#each serviceList}}
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="services" value="{{this.service_id}}" id="service_{{this.service_id}}">
                                <label class="form-check-label fw-bold" for="service_{{this.service_id}}">{{this.service_name}}</label>
                            </div>
                            {{/each}}
                        </div>
                        {{else}}
                        <div class="alert alert-warning">No services available.</div>
                        {{/if}}
                    </div>
                    <textarea class="form-control mb-4" name="note" placeholder="Note something..." rows="3" style="border-radius: 15px;"></textarea>
                    <div class="text-end">
                        <button type="submit" class="btn btn-primary rounded-pill px-4 fw-bold">SUBMIT</button>
                    </div>
                </form>
                {{else}}
                <div class="text-center py-4">
                    <p class="mb-3">Please <a href="/signin" class="text-decoration-none fw-bold">sign in</a> or <a href="/signup" class="text-decoration-none fw-bold">sign up</a> to book an appointment.</p>
                </div>
                {{/if}}
            </div>
        </div>
    </div>
</div>

<footer id="contact" class="footer-custom">
        <div class="container">

            <div class="row">
                <div class="col-lg-3 col-md-6 mb-5">
                    <a href="#home" class="footer-brand"><i class="bi bi-paw-fill me-2 text-primary"></i>PetCareUS</a>
                    <p class="mb-4 lh-lg">
                        We are dedicated to providing the highest quality care for your pets. Our team of experts is
                        here
                        24/7 to ensure your furry friends are healthy and happy.
                    </p>
                    <div class="d-flex gap-3">
                        <a href="#"
                            class="btn btn-outline-light rounded-circle d-flex align-items-center justify-content-center"
                            style="width: 40px; height: 40px;"><i class="bi bi-facebook"></i></a>
                        <a href="#"
                            class="btn btn-outline-light rounded-circle d-flex align-items-center justify-content-center"
                            style="width: 40px; height: 40px;"><i class="bi bi-twitter"></i></a>
                        <a href="#"
                            class="btn btn-outline-light rounded-circle d-flex align-items-center justify-content-center"
                            style="width: 40px; height: 40px;"><i class="bi bi-instagram"></i></a>
                    </div>
                </div>

                <div class="col-lg-3 col-md-6 mb-5 ps-lg-5">
                    <h5 class="footer-heading">Quick Links</h5>
                    <ul class="list-unstyled footer-links">
                        <li><a href="#home"><i class="bi bi-chevron-right me-2"></i> Home</a></li>
                        <li><a href="#about"><i class="bi bi-chevron-right me-2"></i> About Us</a></li>
                        <li><a href="#contact"><i class="bi bi-chevron-right me-2"></i> Contact</a></li>
                    </ul>
                </div>

                <div class="col-lg-3 col-md-6 mb-5">
                    <h5 class="footer-heading">Opening Hours</h5>
                    <ul class="list-unstyled opening-hours-list mt-3">
                        <li>Monday - Friday <span>08:00 - 20:00</span></li>
                        <li>Saturday <span>09:00 - 18:00</span></li>
                        <li>Sunday <span>09:00 - 16:00</span></li>
                        <li>Emergency <span>24/7 Open</span></li>
                    </ul>
                </div>

                <div class="col-lg-3 col-md-12 mb-5">
                    <h5 class="footer-heading">Contact Info</h5>
                    <div class="contact-info-item mt-3">
                        <i class="bi bi-geo-alt-fill"></i>
                        <div>
                            <strong class="text-white d-block mb-1">Location:</strong>
                            227 Nguyen Van Cu, Ward 1,<br> Dist 5, HCMC
                        </div>
                    </div>
                    <div class="contact-info-item">
                        <i class="bi bi-telephone-fill"></i>
                        <div>
                            <strong class="text-white d-block mb-1">Phone:</strong>
                            +84 123 456 789
                        </div>
                    </div>

                    <div class="map-container">
                        <iframe
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3919.669726937899!2d106.68006841533416!3d10.759917092332677!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31752f1b7c3ed289%3A0xa0665189479a30f1!2zVHLGsOG7nW5nIMSQ4bqhaSBo4buNYyBLaG9hIGjhu41jIFThu7Egbmhpw6puIC0gxJDhuqFpIGjhu41jIFF14buRYyBnaWEgVFAuSENN!5e0!3m2!1svi!2s!4v1647424567890!5m2!1svi!2s"
                            width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy">
                        </iframe>
                    </div>
                </div>
            </div>
        </div>

        <div class="copyright-area">
            <div class="container text-center">
                <p class="mb-0">&copy; 2025 <strong class="text-white">PetCareUS</strong>. Designed with <i
                        class="bi bi-heart-fill text-danger"></i> for Pets.</p>
            </div>
        </div>
    </footer>

    {{#section 'js'}}
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // --- 1. SCROLLSPY LOGIC ---
            const navLinks = document.querySelectorAll(".navbar-nav .nav-link");
            window.addEventListener("scroll", () => {
                let current = "";
                const sections = document.querySelectorAll("section, footer"); // Bao gồm cả footer
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 150) {
                        current = section.getAttribute("id");
                    }
                });
                navLinks.forEach(link => {
                    link.classList.remove("active");
                    if (link.getAttribute("href") && link.getAttribute("href").includes(current)) {
                        link.classList.add("active");
                    }
                });
            });

            // --- 2. CAROUSEL AUTO-SCROLL LOGIC ---
            function initCarousel(carouselId, speed = 25) {
                const track = document.getElementById(carouselId);
                if (!track) return;

                const items = track.children;
                if (items.length === 0) return;

                // Clone items for infinite scroll
                if (items.length > 2) {
                    const originalItems = Array.from(items);
                    originalItems.forEach(item => {
                        const clone = item.cloneNode(true);
                        track.appendChild(clone);
                    });
                    
                    // Adjust animation duration based on content
                    track.style.animationDuration = speed + 's';
                } else {
                    // If few items, center them
                    track.style.animation = 'none';
                    track.style.justifyContent = 'center';
                    track.parentElement.style.display = 'flex';
                    track.parentElement.style.justifyContent = 'center';
                }
            }

            // Initialize carousels
            setTimeout(() => {
                initCarousel('servicesCarousel', 100);
                initCarousel('employeesCarousel', 40);
            }, 100);

            // --- 3. BOOKING FORM ---
            const bookingForm = document.getElementById('bookingForm');
            if (bookingForm) {
                bookingForm.addEventListener('submit', function (e) {
                    e.preventDefault();
                    Swal.fire({
                        title: 'Success!',
                        text: 'Appointment booked successfully.',
                        icon: 'success',
                        confirmButtonColor: '#2d5bff'
                    }).then(() => { e.target.submit(); });
                });
            }
        });
    </script>
    {{/section}}