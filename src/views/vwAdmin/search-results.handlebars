{{#section 'css'}}
<style>
    .search-header {
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-radius: 15px;
        padding: 30px;
        color: white;
        margin-bottom: 30px;
    }

    .search-query {
        font-size: 1.5rem;
        font-weight: bold;
    }

    .result-count {
        opacity: 0.8;
    }

    .result-section {
        background: white;
        border-radius: 15px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
        margin-bottom: 20px;
        overflow: hidden;
    }

    .result-section-header {
        background: #f8f9fa;
        padding: 15px 20px;
        border-bottom: 1px solid #eee;
        font-weight: bold;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .result-section-header .badge {
        font-size: 0.9rem;
    }

    .result-item {
        padding: 15px 20px;
        border-bottom: 1px solid #f0f0f0;
        transition: background 0.2s;
    }

    .result-item:hover {
        background: #f8f9fa;
    }

    .result-item:last-child {
        border-bottom: none;
    }

    .result-name {
        font-weight: 600;
        color: #333;
    }

    .result-info {
        font-size: 0.9rem;
        color: #666;
    }

    .highlight {
        background-color: #fff3cd;
        padding: 2px 4px;
        border-radius: 3px;
    }
</style>
{{/section}}

<div class="search-header">
    <div class="d-flex justify-content-between align-items-center">
        <div>
            <div class="search-query">
                <i class="bi bi-search me-2"></i>Search results for: "{{query}}"
            </div>
            <div class="result-count">Found {{totalResults}} results</div>
        </div>
        <a href="javascript:history.back()" class="btn btn-light rounded-pill px-4">
            <i class="bi bi-arrow-left me-2"></i>Go Back
        </a>
    </div>
</div>

{{#if results.employees.length}}
<div class="result-section">
    <div class="result-section-header">
        <span><i class="bi bi-people me-2"></i>Employees</span>
        <span class="badge bg-primary">{{results.employees.length}}</span>
    </div>
    {{#each results.employees}}
    <div class="result-item">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <div class="result-name">{{this.full_name}}</div>
                <div class="result-info">
                    <i class="bi bi-envelope me-1"></i>{{this.email}}
                    {{#if this.phone}}<span class="ms-3"><i
                            class="bi bi-telephone me-1"></i>{{this.phone}}</span>{{/if}}
                </div>
            </div>
            <div>
                <span
                    class="badge bg-{{#if (eq this.role 'admin')}}danger{{else if (eq this.role 'veterinarian')}}success{{else}}secondary{{/if}} text-uppercase">
                    {{this.role}}
                </span>
                <a href="/admin/employees/edit?id={{this.user_id}}" class="btn btn-sm btn-outline-primary ms-2">
                    <i class="bi bi-pencil"></i>
                </a>
            </div>
        </div>
    </div>
    {{/each}}
</div>
{{/if}}

{{#if results.customers.length}}
<div class="result-section">
    <div class="result-section-header">
        <span><i class="bi bi-person me-2"></i>Customers</span>
        <span class="badge bg-success">{{results.customers.length}}</span>
    </div>
    {{#each results.customers}}
    <div class="result-item">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <div class="result-name">{{this.full_name}}</div>
                <div class="result-info">
                    <i class="bi bi-envelope me-1"></i>{{this.email}}
                    {{#if this.phone}}<span class="ms-3"><i
                            class="bi bi-telephone me-1"></i>{{this.phone}}</span>{{/if}}
                </div>
            </div>
            <a href="/admin/customers/edit?id={{this.user_id}}" class="btn btn-sm btn-outline-primary">
                <i class="bi bi-eye"></i> View
            </a>
        </div>
    </div>
    {{/each}}
</div>
{{/if}}

{{#if results.services.length}}
<div class="result-section">
    <div class="result-section-header">
        <span><i class="bi bi-tools me-2"></i>Services</span>
        <span class="badge bg-info">{{results.services.length}}</span>
    </div>
    {{#each results.services}}
    <div class="result-item">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <div class="result-name">{{this.service_name}}</div>
                <div class="result-info">{{this.description}}</div>
            </div>
            <div>
                <span class="fw-bold text-primary">{{this.base_price}} VND</span>
            </div>
        </div>
    </div>
    {{/each}}
</div>
{{/if}}

{{#if results.medicines.length}}
<div class="result-section">
    <div class="result-section-header">
        <span><i class="bi bi-capsule me-2"></i>Medicines</span>
        <span class="badge bg-warning text-dark">{{results.medicines.length}}</span>
    </div>
    {{#each results.medicines}}
    <div class="result-item">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <div class="result-name">{{this.medicine_name}}</div>
                <div class="result-info">
                    {{#if this.form}}<span class="me-3"><i
                            class="bi bi-prescription me-1"></i>{{this.form}}</span>{{/if}}
                    {{#if this.category}}<span><i class="bi bi-tag me-1"></i>{{this.category}}</span>{{/if}}
                </div>
            </div>
            <a href="/admin/medicines/edit?id={{this.medicine_id}}" class="btn btn-sm btn-outline-primary">
                <i class="bi bi-pencil"></i>
            </a>
        </div>
    </div>
    {{/each}}
</div>
{{/if}}

{{#unless totalResults}}
<div class="text-center py-5">
    <i class="bi bi-search display-1 text-secondary"></i>
    <p class="text-secondary mt-3">No results found for "{{query}}"</p>
    <p class="text-muted">Try different keywords or check your spelling</p>
</div>
{{/unless}}